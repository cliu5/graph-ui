<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src= "https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <link rel ="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

    <title> Open Interest </title>

    <!--
    <ul>
        <li><a id = "oi" href="/d3bitmex">Open Interest</a></li>
        <li><a href="/d3bitmexliquidations">Liquidations</a></li>
        <li><a href="/d3Prices">Prices</a></li>
        <li><a href="/d3Volume">Volume</a></li>
      </ul>

  </head>
  <body>
 
    <a id = "bitmex" href = "/d3bitmex"> bitmex </a>
    <a id = "binance" href = "/d3binance"> binance </a>
    <a id = "bybit" href = "/d3bybit"> bybit </a>
    <a id = "ftx" href = "/d3ftx"> FTX </a>
    <a id = "huobi" href = "/d3huobi"> huobi </a>
    <a id = "okex" href = "/d3okexUSDswap"> okex </a>
    <a id = "deribit" href = "/d3deribit"> deribit </a>

  -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white py-3 shadow-sm">
    <div class="container">
        <a href="/d3bitmex" id = "oi" class="navbar-brand font-weight-bold">Data Visualization</a>
      <button type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbars" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler">
                <span class="navbar-toggler-icon"></span>
            </button>
  
  
      <div id="navbarContent" class="collapse navbar-collapse">
        <ul class="navbar-nav mr-auto">
          <!-- Level one dropdown -->
          <li class="nav-item dropdown">
            <a id="dropdownMenu1" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle">Open Interest</a>
            <ul aria-labelledby="dropdownMenu1" class="dropdown-menu border-0 shadow">
              <li><a href="/d3bitmex" class="dropdown-item">Bitmex </a></li>
              <li><a href="/d3binance" class="dropdown-item">Binance</a></li>
              <li><a href="/d3bybit" class="dropdown-item">Bybit</a></li>
              <li><a href="/d3ftx" class="dropdown-item">FTX</a></li>
              <li><a href="/d3huobi" class="dropdown-item">Huobi</a></li>
              <li><a href="/d3deribit" class="dropdown-item">Deribit</a></li>
  
              <li class="dropdown-divider"></li>
  
              <!-- Level two dropdown-->
              <li class="dropdown-submenu">
                <a id="dropdownMenu2" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-item dropdown-toggle">Okex</a>
                <ul aria-labelledby="dropdownMenu2" class="dropdown-menu border-0 shadow">
                  <li>
                    <a tabindex="-1" href="/d3okexUSDswap" class="dropdown-item">Coin Margined Swap</a>
                  </li>
  
               
  
                  <li><a href="/d3okexUSDTswap" class="dropdown-item">USDT Margined Swap</a></li>
                  <li><a href="/d3okexUSDfutures" class="dropdown-item">Coin Margined Futures</a></li>
                  <li><a href="/d3okexUSDTfutures" class="dropdown-item">USDT Margined Futures</a></li>
                </ul>
              </li>
              <!-- End Level two -->
              
              
            </ul>
          </li>

          <li class="nav-item dropdown">
            <a id="dropdownMenu5" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle"> Aggregative Open Interest</a>
                     <ul aria-labelledby="dropdownMenu5" class="dropdown-menu border-0 shadow">
                        <li><a href="/d3btc-oi" class="dropdown-item">BTC </a></li>
                        <li><a href="/d3eth-oi" class="dropdown-item">ETH</a></li>
                        <li><a href="/d3xrp-oi" class="dropdown-item">XRP</a></li>
                        <li><a href="/d3bch-oi" class="dropdown-item">BCH</a></li>
                        <li><a href="/d3bsv-oi" class="dropdown-item">BSV</a></li>
                        <li><a href="/d3ltc-oi" class="dropdown-item">LTC</a></li>
                        <li><a href="/d3bnb-oi" class="dropdown-item">BNB</a></li>
                        <li><a href="/d3trx-oi" class="dropdown-item">TRX</a></li>
                        <li><a href="/d3eos-oi" class="dropdown-item">EOS</a></li>
                        <li><a href="/d3open-interest" class="dropdown-item">Custom</a></li>

                       <!-- <li><a href="/d3ftxliquidations" class="dropdown-item">FTX</a></li>-->
                       
                       <!-- End Level two -->
                       
                       
                     </ul>
                     </li>

          <!-- End Level one -->
                  <li class="nav-item dropdown">
   <a id="dropdownMenu3" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle">Liquidations</a>
            <ul aria-labelledby="dropdownMenu3" class="dropdown-menu border-0 shadow">
              <li><a href="/d3bitmexliquidations" class="dropdown-item">Bitmex </a></li>
              <li><a href="/d3binanceliquidations" class="dropdown-item">Binance</a></li>
              <li><a href="/d3okexliquidations" class="dropdown-item">Okex</a></li>
              <li><a href="/d3ftxliquidations" class="dropdown-item">FTX</a></li>
              
              <!-- End Level two -->
              
              
            </ul>
            </li>
           
            <li class="nav-item dropdown">
   <a id="dropdownMenu4" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle">Volume</a>
            <ul aria-labelledby="dropdownMenu4" class="dropdown-menu border-0 shadow">
              <li><a href="/d3bitmexvolume" class="dropdown-item">Bitmex </a></li>
              
              <!-- End Level two -->
              
              
            </ul>
            </li>
         
          <li class="nav-item"><a href="/d3Prices" class="nav-link">Prices</a></li>
          <li class="nav-item"> <button> <a  id = "bitmex" class="nav-link">Refresh Bitmex</a></li> </button>



          
        </ul>
      </div>
    </div>
  </nav>
  <script>
      $(function() {
  // ------------------------------------------------------- //
  // Multi Level dropdowns
  // ------------------------------------------------------ //
  $("ul.dropdown-menu [data-toggle='dropdown']").on("click", function(event) {
    event.preventDefault();
    event.stopPropagation();

    $(this).siblings().toggleClass("show");


    if (!$(this).next().hasClass('show')) {
      $(this).parents('.dropdown-menu').first().find('.show').removeClass("show");
    }
    $(this).parents('li.nav-item.dropdown.show').on('hidden.bs.dropdown', function(e) {
      $('.dropdown-submenu .show').removeClass("show");
    });

  });
});
  </script>
  <style>
       ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}
li {
  display: inline;
}
        body {
          font: 14px sans-serif;
          position: absolute;
          margin-left:40px;
        }
        
        .bar{
            fill: grey;
            opacity: .8;
        }
         
        .axis path,
        .axis line {
          fill: none;
          stroke: #000;
          shape-rendering: crispEdges;
        }
        
        .line {
  fill: none;
  stroke: steelblue;
  stroke-width: 2px;
}

.axisSteelBlue text{
  fill: steelblue;
}

.axisRed text{
  fill: red;
}
        
        .tooltip {
          position: absolute;
          width: 200px;
          height: 28px;
          pointer-events: none;
        }

      .dropdown-submenu {
  position: relative;
}

.dropdown-submenu>a:after {
  content: "\f0da";
  float: right;
  border: none;
}

.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: 0px;
  margin-left: 0px;
}
  </style>
  

      <br>
    
      
    bitmex XBTUSD OI in USD 
    <button id = "1h" onclick="update('1h')">  1 Hour </button>
    <button id = "2h" onclick="update('2h')">  2 Hours </button>
    <button id = "12h" onclick="update('12h')">  12 Hours </button>
    <button id = "1d" onclick="update('1d')">  1 Day </button>
    <button id = "1d" onclick="update('3d')">  3 Days </button>
    <label>
        <input id="check" type="checkbox" > Coin Denominated
      </label>
    <br>
    
    <svg id = "svg1" width="890" height="450"></svg>

    <script>
        

         $(function() {
          $('a#bitmex').bind('click', function() {
            $.getJSON('/refresh_bitmex',
                function(data) {
            });
            return false;
          });
        });

      
        const xValue = d => d.date;
      const xLabel = 'Time';
      const yValue = d => d.value;
      const yLabel = 'Open Interest';
      const margin = { left: 100, right: 100, top: 20, bottom: 140 };
      const svg = d3.select("#svg1");
      var parseTime = d3.timeParse("%Y-%m-%dT%H:%M:%S");
      const width = svg.attr('width');
      const height = svg.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;

      var y1 = d3.scaleLinear().range([innerHeight, 0]);
      var x = d3.scaleTime().range([0, innerWidth])

      var valueline2 = d3.line()
        .x(function(d) { return x(d.date); })
        .y(function(d) { return y1(d.price); });

              


        function update(selectedVar){
            var isChecked = document.getElementById("check").checked;
      svg.selectAll("*").remove();

           // d3.selectAll('g > *').remove();


      const g = svg.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-XBTUSD-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine").style("opacity", newOpacity);
       d3.select("#redAxis").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine.active = active;
     })
     .text("Price Line");


     if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}

    d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-XBTUSD-open-interest-'+ file_name + '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .4)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      //update('2h');


      //function refresh(){
       // socket.emit('refresh_oi');
     //setTimeout(refresh, 30000);

        }

    </script>

<br>bitmex XBTM20 OI in USD
<button id = "1h" onclick="update2('1h')">  1 Hour </button>
    <button id = "2h" onclick="update2('2h')">  2 Hours </button>
    <button id = "12h" onclick="update2('12h')">  12 Hours </button>
    <button id = "1d" onclick="update2('1d')">  1 Day </button>
    <button id = "1d" onclick="update2('3d')">  3 Days </button>

    <label>
        <input id="check1" type="checkbox" > Coin Denominated
      </label>
    <br>
    <svg id = "svg2" width="890" height="450"></svg>

   <script> 


    const svg2 = d3.select('#svg2');

   

    function update2(selectedVar){
        var isChecked = document.getElementById("check1").checked;

            const width = svg2.attr('width');
      const height = svg2.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg2.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g2 = svg2.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g2.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g2.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-XBTM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg2.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine2")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg2.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis2")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg2.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine2.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine2").style("opacity", newOpacity);
       d3.select("#redAxis2").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine2.active = active;
     })
     .text("Price Line");

     if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}

    d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-XBTM20-open-interest-' + file_name + '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g2.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .4)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
    }
</script>




<br> bitmex XBTU20 OI in USD
<button id = "1h" onclick="update12('1h')">  1 Hour </button>
    <button id = "2h" onclick="update12('2h')">  2 Hours </button>
    <button id = "12h" onclick="update12('12h')">  12 Hours </button>
    <button id = "1d" onclick="update12('1d')">  1 Day </button>
    <button id = "1d" onclick="update12('3d')">  3 Days </button>
    <label>
        <input id="check3" type="checkbox" > Coin Denominated
      </label>
    <br>
    <svg id = "svg12" width="890" height="450"></svg>

   <script> 


    const svg12 = d3.select('#svg12');

   

    function update12(selectedVar){
        var isChecked = document.getElementById("check3").checked;
            const width = svg12.attr('width');
      const height = svg12.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg12.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g12 = svg12.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g12.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g12.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-XBTU20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg12.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine12")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg12.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis12")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg12.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine12.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine12").style("opacity", newOpacity);
       d3.select("#redAxis12").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine12.active = active;
     })
     .text("Price Line");

if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}

        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-XBTU20-open-interest-' + file_name + '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g12.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .6)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }

update12('2h')
</script>

<br>bitmex ETHUSD OI in USD
<button id = "1h" onclick="update3('1h')">  1 Hour </button>
    <button id = "2h" onclick="update3('2h')">  2 Hours </button>
    <button id = "12h" onclick="update3('12h')">  12 Hours </button>
    <button id = "1d" onclick="update3('1d')">  1 Day </button>
    <button id = "1d" onclick="update3('3d')">  3 Days </button>
    <label>
        <input id="check4" type="checkbox" > Coin Denominated
      </label>
    <br>
    <svg id = "svg3" width="890" height="450"></svg>

   <script> 


    const svg3 = d3.select('#svg3');

   

    function update3(selectedVar){
        var isChecked = document.getElementById("check4").checked;
            const width = svg3.attr('width');
      const height = svg3.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg3.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g3 = svg3.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g3.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g3.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-ETHUSD-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}) - 80, d3.max(data, function(d) {return Math.max(d.price); + 50})]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg3.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine3")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg3.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis3")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg3.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine3.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine3").style("opacity", newOpacity);
       d3.select("#redAxis3").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine3.active = active;
     })
     .text("Price Line");

            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}

        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-ETHUSD-open-interest-' + file_name + '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g3.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .4)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }
</script>



<br>bitmex ETHM20 OI in USD
<button id = "1h" onclick="update4('1h')">  1 Hour </button>
    <button id = "2h" onclick="update4('2h')">  2 Hours </button>
    <button id = "12h" onclick="update4('12h')">  12 Hours </button>
    <button id = "1d" onclick="update4('1d')">  1 Day </button>
    <button id = "1d" onclick="update4('3d')">  3 Days </button>
    <label>
        <input id="check5" type="checkbox" > Coin Denominated
      </label>

    <br>
    <svg id = "svg4" width="890" height="450"></svg>

   <script> 


    const svg4 = d3.select('#svg4');

   

    function update4(selectedVar){
        var isChecked = document.getElementById("check5").checked;

            const width = svg4.attr('width');
      const height = svg4.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg4.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g4 = svg4.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g4.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g4.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-ETHM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg4.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine4")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg4.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis4")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg4.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine4.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine4").style("opacity", newOpacity);
       d3.select("#redAxis4").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine2.active = active;
     })
     .text("Price Line");

            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}


        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-ETHM20-open-interest-' + file_name + '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g4.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .8)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }
</script>



<br>bitmex XRPUSD OI in USD
<button id = "1h" onclick="update5('1h')">  1 Hour </button>
    <button id = "2h" onclick="update5('2h')">  2 Hours </button>
    <button id = "12h" onclick="update5('12h')">  12 Hours </button>
    <button id = "1d" onclick="update5('1d')">  1 Day </button>
    <button id = "1d" onclick="update5('3d')">  3 Days </button>
    <label>
        <input id="check5" type="checkbox" > Coin Denominated
      </label>
    <br>
    <svg id = "svg5" width="890" height="450"></svg>

   <script> 


    const svg5 = d3.select('#svg5');

   

    function update5(selectedVar){
        var isChecked = document.getElementById("check5").checked;


            const width = svg5.attr('width');
      const height = svg5.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg5.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g5 = svg5.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g5.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g5.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-XBTM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg5.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine5")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg5.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis5")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg5.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine5.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine5").style("opacity", newOpacity);
       d3.select("#redAxis5").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine5.active = active;
     })
     .text("Price Line");
            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}
        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-XRPUSD-open-interest-' + file_name + '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g5.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .6)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }
</script>



<br>bitmex XRPM20 OI in USD
<button id = "1h" onclick="update0('1h')">  1 Hour </button>
    <button id = "2h" onclick="update0('2h')">  2 Hours </button>
    <button id = "12h" onclick="update0('12h')">  12 Hours </button>
    <button id = "1d" onclick="update0('1d')">  1 Day </button>
    <button id = "1d" onclick="update0('3d')">  3 Days </button>
    <label>
        <input id="check0" type="checkbox" > Coin Denominated
      </label>
    <br>
    <svg id = "svg0" width="890" height="450"></svg>

   <script> 


    const svg0= d3.select('#svg0');

   

    function update0(selectedVar){

        var isChecked = document.getElementById("check0").checked;

            const width = svg0.attr('width');
      const height = svg0.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg0.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g0 = svg0.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g0.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g0.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };
            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-XRPM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg0.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine0")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg0.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis0")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg0.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine0.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine0").style("opacity", newOpacity);
       d3.select("#redAxis0").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine0.active = active;
     })
     .text("Price Line");
            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}

        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-XRPM20-open-interest-'+file_name+'.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g0.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .6)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }

      update0('2h')
</script>



<br> bitmex BCHM20 OI in USD
<button id = "1h" onclick="update6('1h')">  1 Hour </button>
    <button id = "2h" onclick="update6('2h')">  2 Hours </button>
    <button id = "12h" onclick="update6('12h')">  12 Hours </button>
    <button id = "1d" onclick="update6('1d')">  1 Day </button>
    <button id = "1d" onclick="update6('3d')">  3 Days </button>
    <label>
        <input id="check6" type="checkbox" > Coin Denominated
      </label>


    <br>
    <svg id = "svg6" width="890" height="450"></svg>

   <script> 


    const svg6 = d3.select('#svg6');

   

    function update6(selectedVar){
        var isChecked = document.getElementById("check6").checked;

            const width = svg6.attr('width');
      const height = svg6.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg6.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g6 = svg6.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g6.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g6.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-BCHM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg6.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine6")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg6.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis6")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg6.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine6.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine6").style("opacity", newOpacity);
       d3.select("#redAxis6").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine6.active = active;
     })
     .text("Price Line");
            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}
        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-BCHM20-open-interest-'+file_name+'.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g6.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .6)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }
      


</script>

<br> bitmex TRXM20 OI in USD
<button id = "1h" onclick="update7('1h')">  1 Hour </button>
    <button id = "2h" onclick="update7('2h')">  2 Hours </button>
    <button id = "12h" onclick="update7('12h')">  12 Hours </button>
    <button id = "1d" onclick="update7('1d')">  1 Day </button>
    <button id = "1d" onclick="update7('3d')">  3 Days </button>
    <label>
        <input id="check7" type="checkbox" > Coin Denominated
      </label>
    <br>
    <svg id = "svg7" width="890" height="450"></svg>

   <script> 


    const svg7 = d3.select('#svg7');

   

    function update7(selectedVar){
        var isChecked = document.getElementById("check7").checked;

            const width = svg7.attr('width');
      const height = svg7.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg7.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g7 = svg7.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g7.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g7.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-TRXM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg7.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine7")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg7.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis7")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg7.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine7.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine7").style("opacity", newOpacity);
       d3.select("#redAxis7").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine7.active = active;
     })
     .text("Price Line");
            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}

        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-TRXM20-open-interest-' +file_name+ '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g7.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .6)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }
    </script>



<br> bitmex LTCM20 OI in USD
<button id = "1h" onclick="update8('1h')">  1 Hour </button>
    <button id = "2h" onclick="update8('2h')">  2 Hours </button>
    <button id = "12h" onclick="update8('12h')">  12 Hours </button>
    <button id = "1d" onclick="update8('1d')">  1 Day </button>
    <button id = "1d" onclick="update8('3d')">  3 Days </button>
    <label>
        <input id="check8" type="checkbox" > Coin Denominated
      </label>
    <br>
    <svg id = "svg8" width="890" height="450"></svg>

   <script> 


    const svg8 = d3.select('#svg8');

   

    function update8(selectedVar){
        var isChecked = document.getElementById("check8").checked;

            const width = svg8.attr('width');
      const height = svg8.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg8.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g8 = svg8.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g8.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g8.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-LTCM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg8.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine8")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg8.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis8")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg8.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine8.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine8").style("opacity", newOpacity);
       d3.select("#redAxis8").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine8.active = active;
     })
     .text("Price Line");

            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}
        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-LTCM20-open-interest-' +file_name+ '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g8.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .6)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }
    </script>


<br> bitmex ADAM20 OI in USD
<button id = "1h" onclick="update9('1h')">  1 Hour </button>
    <button id = "2h" onclick="update9('2h')">  2 Hours </button>
    <button id = "12h" onclick="update9('12h')">  12 Hours </button>
    <button id = "1d" onclick="update9('1d')">  1 Day </button>
    <button id = "1d" onclick="update9('3d')">  3 Days </button>
    <label>
        <input id="check9" type="checkbox" > Coin Denominated
      </label>

    <br>
    <svg id = "svg9" width="890" height="450"></svg>

   <script> 


    const svg9 = d3.select('#svg9');

   

    function update9(selectedVar){
        var isChecked = document.getElementById("check9").checked;

            const width = svg9.attr('width');
      const height = svg9.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg9.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g9 = svg9.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g9.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g9.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-ADAM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg9.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine9")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg9.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis9")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg9.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine9.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine9").style("opacity", newOpacity);
       d3.select("#redAxis9").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine9.active = active;
     })
     .text("Price Line");

            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}
        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-ADAM20-open-interest-' +file_name+ '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g9.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .6)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }
    </script>


<br> bitmex EOSM20 OI in USD
<button id = "1h" onclick="update11('1h')">  1 Hour </button>
    <button id = "2h" onclick="update11('2h')">  2 Hours </button>
    <button id = "12h" onclick="update11('12h')">  12 Hours </button>
    <button id = "1d" onclick="update11('1d')">  1 Day </button>
    <button id = "1d" onclick="update11('3d')">  3 Days </button>
    <label>
        <input id="check11" type="checkbox" > Coin Denominated
      </label>

    <br>
    <svg id = "svg11" width="890" height="450"></svg>

   <script> 


    const svg11 = d3.select('#svg11');

   

    function update11(selectedVar){
        var isChecked = document.getElementById("check11").checked;


            const width = svg11.attr('width');
      const height = svg11.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;
      
      svg11.selectAll("*").remove();

            //d3.selectAll('svg2 > *').remove();


      const g11 = svg11.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g11.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g11.append('g');

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);


            const xScale = d3.scaleTime();
            const yScale = d3.scaleLinear();

            const xAxis = d3.axisBottom()
                .scale(xScale)
                .tickPadding(15)
                .tickSize(-innerHeight);

            const yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5)
                .tickPadding(15)
                .tickSize(-innerWidth);
                
            
            const row = d => {
                d.date = new Date(d.date);
                d.value = +d.value;
                return d;
            };

            d3.csv("/static/js/open-interest-price/bitmex-" + selectedVar + "-EOSM20-open-interest-price.csv", function(error, data) {
      if (error) throw error;
    
      // format the data
      data.forEach(function(d) {
          d.date = parseTime(d.date);
          d.price = +d.price;
          d.oi = +d.oi;
      });
    
      // Scale the range of the data
      x.domain(d3.extent(data, function(d) { return d.date; }));
      y1.domain([d3.min(data, function(d) {return Math.min(d.price);}), d3.max(data, function(d) {return Math.max(d.price); })]);
    
      var tempWidth = innerWidth + 100 

      // Add the valueline2 path.
      svg11.append("path")
          .data([data])
          .attr("class", "line")
          .attr("id", "redLine11")
          .style("stroke", "red")
          .attr("d", valueline2)
          .attr("transform", "translate( 100" + ", 20 )");
    
    
      // Add the Y1 Axis
      svg11.append("g")
          .attr("class", "axisRed")
          .attr("transform", "translate( " + tempWidth + ", 20 )")
          .attr("id", "redAxis11")
          .call(d3.axisRight(y1));
    
    });
    

  // add the red line legend
  svg11.append("text")
     .attr("x", innerWidth + 40)             
     .attr("y", margin.top - 10)    
     .attr("class", "legend")
     .style("fill", "red")         
     .on("click", function(){
       // determine if current line is visible
       var active   = redLine11.active ? false : true,
       newOpacity = active ? 0 : 1;
       // hide or show the elements
       d3.select("#redLine11").style("opacity", newOpacity);
       d3.select("#redAxis11").style("opacity", newOpacity);
       // update whether or not the elements are active
       redLine11.active = active;
     })
     .text("Price Line");


            if (isChecked){
    file_name = 'coin'
}
else{
    file_name = 'usd'
}

        d3.csv('/static/js/open-interest/bitmex-' + selectedVar + '-EOSM20-open-interest-'  +file_name+ '.csv', row, data => {
           xScale
            .domain(d3.extent(data, xValue))
            .range([0, innerWidth])
            .nice();

            yScale
            .domain(d3.extent(data, yValue))
            .range([innerHeight, 0])
            .nice();

            g11.selectAll('circle').data(data)
            .enter().append('circle')
                .attr('cx', d => xScale(xValue(d)))
                .attr('cy', d => yScale(yValue(d)))
                .attr('fill-opacity', .6)
                .attr('r', 5)
                .style("fill", "steelblue")
            
            xAxisG.call(xAxis);
            yAxisG.call(yAxis);
        });
      }

      update('12h')
update2('12h')
update3('12h')
update4('12h')
update5('12h')

      update6('12h')
      update7('12h')
      update8('12h')
      update9('12h')
      update11('12h')

    </script>
  </body>
</html>